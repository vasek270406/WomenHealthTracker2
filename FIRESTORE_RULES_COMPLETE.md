# üîí –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firestore

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Firebase Console!

–¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ –≤–∫–ª—é—á–∞—é—Ç –≤—Å–µ –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏–∏, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É `PERMISSION_DENIED`.

---

## üìã –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://console.firebase.google.com/
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **"womenht2"**
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Firestore Database**
5. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Rules"** (–ü—Ä–∞–≤–∏–ª–∞)

---

## üìã –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –ü–û–õ–ù–´–ï –ø—Ä–∞–≤–∏–ª–∞

**–£–¥–∞–ª–∏—Ç–µ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–∞–≤–∏–ª–∞** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    match /users/{userId} {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
      allow read, write: if request.auth != null && request.auth.uid == userId;
      
      // –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è: –¥–∞–Ω–Ω—ã–µ –¥–Ω—è (days)
      match /days/{date} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è: –¥–∞–Ω–Ω—ã–µ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏ (pregnancy)
      match /pregnancy/{document=**} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è: –¥–∞–Ω–Ω—ã–µ —Ñ–µ—Ä—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (fertility)
      match /fertility/{date} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è: —Å–∏–º–ø—Ç–æ–º—ã –º–µ–Ω–æ–ø–∞—É–∑—ã (menopause_symptoms)
      match /menopause_symptoms/{document=**} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è: –≤–∏–∑–∏—Ç—ã –∫ –≤—Ä–∞—á—É –ø—Ä–∏ –º–µ–Ω–æ–ø–∞—É–∑–µ (menopause_doctor_visits)
      match /menopause_doctor_visits/{visitId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã MRS (mrs_results)
      match /mrs_results/{testDate} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
    }
  }
}
```

---

## üìã –®–∞–≥ 3: –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Publish"** (–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å)
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—è–≤–∏–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

---

## ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Firestore

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–µ–π:

```
users/
  {userId}/
    name: String
    age: Int
    cycleLength: Int
    ...
    
    days/                    ‚Üê –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–Ω–µ–π
      {date}/
        date: String
        mood: Int
        ...
    
    pregnancy/                ‚Üê –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏
      current/
        pregnancyStartDate: String
        visits: List
        ...
    
    fertility/                ‚Üê –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è —Ñ–µ—Ä—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
      {date}/
        date: String
        ...
    
    menopause_symptoms/       ‚Üê –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è —Å–∏–º–ø—Ç–æ–º–æ–≤ –º–µ–Ω–æ–ø–∞—É–∑—ã
      {date}_{type}/
        type: String
        intensity: Int
        ...
    
    menopause_doctor_visits/  ‚Üê –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è –≤–∏–∑–∏—Ç–æ–≤ –∫ –≤—Ä–∞—á—É
      {visitId}/
        id: String
        doctorName: String
        ...
    
    mrs_results/              ‚Üê –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ MRS
      {testDate}/
        totalScore: Int
        ...
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∏–∑–∏—Ç –∫ –≤—Ä–∞—á—É –≤ —Ä–µ–∂–∏–º–µ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ `PERMISSION_DENIED`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firestore Console ‚Üí Data** - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è

---

## üö® –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Firebase Console)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (`request.auth != null`)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `userId` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `request.auth.uid`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª
5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª (–æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)

---

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ:
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –í—Å–µ –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!**






